name: ifimage-cpsam-gpu
channels:
  - conda-forge
  - pytorch
  - nvidia
dependencies:
  - python=3.11
  - pip
  # --- PyTorch + CUDA (让 conda 配好 CUDA 运行库) ---
  - pytorch
  - torchvision
  - pytorch-cuda=12.1         # 如驱动不匹配，可改成 12.4/11.8，见 PyTorch 指南
  # --- SciPy 栈 / 影像 I/O ---
  - numpy
  - scipy
  - scikit-image
  - numba
  - tifffile
  - imagecodecs               # 读压缩 tiff 更稳；装起来略大，但省心
  - opencv
  - natsort
  - fastremap
  - tqdm
  # --- 用 pip 装 cellpose（官方推荐） ---
  - pip:
      - "cellpose>=4.0"       # 带 Cellpose-SAM（cpsam）
      - huggingface_hub       # 模型权重下载


